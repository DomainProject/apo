#include <stdlib.h>
#include <assert.h>
#include <stdio.h>
#include <string.h>
#include "ddm.h"

#define NCUS 25
#define NACT 8

int main(int argc, char const **argv) {

  int total_cus = NCUS;
  int total_actors = NACT;
  enum cu_type cus[NCUS] = {
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
    2,2,2,2,
    4
  };
  int msg_exch_cost[NCUS][NCUS] = { 
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, // 1
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, // 2 
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, // 3
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, // 4
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, // 5
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, // 6
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, // 7
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, // 8
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, // 9
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //11
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //12
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //13
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //14
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //15
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //16
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //17
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //18
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //19
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //20
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //21
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //22
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //23
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }, //24
    { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }  //25
  };
  short runnable_on[NACT] = { 1,1,1,1,6,7,7,7 };
  int cu_capacity[NCUS] = { 
    200,200,200,200,200,200,200,200,200,200,
    200,200,200,200,200,200,200,200,200,200,
    500,500,500,500,
    300
    };


  ddm_init(total_cus,total_actors,cus,msg_exch_cost,runnable_on,cu_capacity);

  struct actor_matrix actors[NACT][NACT] = {
    { { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 } },
    { { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 } },
    { { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 } },
    { { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 } },
    { { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 } },
    { { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 } },
    { { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 } },
    { { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 }, { 1,1 } }
  };

  int tasks_forecast[NACT] = { 50,50,50,50,20,50,50,80 };

 
  enum cu_type *res = ddm_optimize(total_actors,actors,tasks_forecast);

  return 0;
}
